<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <!-- Responsive viewport meta tag is crucial for mobile devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI í•™ìŠµ ë¶„ì„ ë¦¬í¬íŠ¸ - ì´ë¯¸ì†Œ í•™ìƒ</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts (Inter, Noto Sans KR) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* Base body styles and font settings */
        body {
            font-family: 'Noto Sans KR', 'Inter', sans-serif;
            background-color: #f9fafb; /* A softer background color */
            color: #1f2937; /* Higher contrast text color */
        }
        /* Common styles for section cards */
        .section-card {
            background-color: white;
            border-radius: 0.75rem; /* 12px */
            padding: 1.5rem; /* 24px */
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
            margin-bottom: 1.5rem; /* 24px */
        }
        /* Progress analysis grid styles */
        .progress-grid {
            display: grid;
            /* First column for headers, next four for semesters */
            grid-template-columns: 80px repeat(4, 1fr); 
            gap: 0.5rem; /* Gap between grid cells */
            text-align: center;
            font-size: 0.875rem; /* 14px */
            color: #374151; /* gray-700 */
        }
        .grid-cell {
            background-color: #f3f4f6; /* gray-100 */
            border-radius: 0.5rem; /* 8px */
            padding: 0.75rem 0.5rem; /* 12px 8px */
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            position: relative; /* For positioning the 'ME' icon */
            transition: background-color 0.3s ease;
        }
        .grid-header {
            background-color: #e5e7eb; /* gray-200 */
            font-weight: 700;
            color: #1f2937; /* gray-900 */
        }
        /* Style for 'My Progress' indicator */
        .me-icon {
            position: absolute;
            top: 0.25rem;
            left: 0.25rem;
            background-color: #ef4444; /* red-500 */
            color: white;
            font-size: 0.625rem; /* 10px */
            font-weight: 700;
            padding: 0.1rem 0.3rem;
            border-radius: 0.375rem; /* 6px */
        }
        /* Style for top-tier student path highlight */
        .top-tier-path {
            border: 2px solid #facc15; /* yellow-400 */
            box-shadow: 0 0 0 2px rgba(250, 204, 21, 0.5); /* Emphasis effect */
        }
        /* Toggle button styles */
        .toggle-btn {
            background-color: transparent;
            color: #6b7280; /* gray-500 */
            font-weight: 500;
            transition: all 0.2s ease-in-out;
        }
        .toggle-btn.active {
            background-color: #ffffff;
            color: #4f46e5; /* indigo-600 */
            box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        }
        /* Tab button styles */
        .tab-button {
            padding: 0.75rem 1.5rem;
            border-bottom: 3px solid transparent;
            font-weight: 600;
            color: #6b7280;
            transition: all 0.2s ease-in-out;
        }
        .tab-button.active {
            border-color: #4f46e5;
            color: #4f46e5;
        }

        /* Responsive styles for smaller screens (mobile) */
        @media (max-width: 640px) {
            .progress-grid {
                grid-template-columns: 60px repeat(4, 1fr); /* Reduced header column width */
                font-size: 0.75rem; /* Smaller font size */
                gap: 0.25rem; /* Smaller gap */
            }
            .grid-cell {
                padding: 0.5rem 0.25rem;
            }
            .tab-button {
                padding: 0.5rem 1rem;
                font-size: 0.875rem;
            }
        }
    </style>
</head>
<body class="antialiased">

    <main class="max-w-3xl mx-auto p-4 md:p-6">
        <!-- Report Title and Period Section -->
        <div class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">ì´ë¯¸ì†Œ í•™ìƒ ì›”ê°„ ë¦¬í¬íŠ¸</h1>
            <p class="text-md md:text-lg text-gray-500 mt-2">2025ë…„ 7ì›” í•™ìŠµ ë¶„ì„</p>
            <div class="mt-3 text-sm text-gray-400">
                <p>ë¶„ì„ ê¸°ê°„: 2025ë…„ 7ì›” 1ì¼ ~ 7ì›” 31ì¼</p>
            </div>
        </div>

        <!-- D-Day Section (Improved Responsiveness) -->
        <section class="section-card bg-white p-4 rounded-lg mb-6 flex flex-col sm:flex-row items-center sm:items-start justify-between text-center sm:text-left">
            <div class="flex items-center mb-3 sm:mb-0 sm:mr-4">
                <span class="text-red-600 font-bold text-3xl sm:text-2xl mr-2 sm:mr-4 flex-shrink-0">D-80</span>
                <!-- FIX: Added min-w-0 to prevent text overflow in flex container on mobile -->
                <p class="text-gray-700 text-sm md:text-base flex-grow min-w-0">
                    ì—°í¬ì¤‘í•™êµì˜ 2í•™ë…„ 2í•™ê¸° ì¤‘ê°„ê³ ì‚¬ëŠ” <strong class="text-gray-900 whitespace-nowrap">10ì›” 20ì¼ ~ 10ì›” 21ì¼</strong>ì…ë‹ˆë‹¤.<br class="sm:hidden">
                    ì•„ì§ ì‹œê°„ì´ ë‚¨ì•˜ì§€ë§Œ <strong class="text-gray-900 whitespace-nowrap">10ì›”ì—ëŠ” ê¸´ ì—°íœ´ê°€ ìˆê¸° ë•Œë¬¸ì— 8~9ì›”ì— í•™ìŠµì„ ì§€ì†</strong>í•˜ëŠ” ê²ƒì´ ë§¤ìš° ì¤‘ìš”í•´ìš”.
                </p>
            </div>
        </section>
        
        <!-- 1. Overall Summary -->
        <section class="section-card">
            <h2 class="text-xl font-bold mb-3 text-indigo-600">ğŸš€ 7ì›” í•™ìŠµ ìš”ì•½</h2>
            <p class="text-gray-600 mb-4">
                ì§€ë‚œ í•œ ë‹¬ê°„ ë¯¸ì†Œ í•™ìƒì€ <strong class="text-indigo-600">êµ­ì–´, ì˜ì–´, ìˆ˜í•™, ê³¼í•™, ì—­ì‚¬ ì „ê³¼ëª©</strong>ì„ ì„±ì‹¤í•˜ê²Œ í•™ìŠµí–ˆìŠµë‹ˆë‹¤. 
                ê³„ì†í•´ì„œ ê³¼ëª©ì˜ ì¹˜ìš°ì¹¨ì´ ì—†ì´ <strong class="text-gray-800">ê³¨ê³ ë£¨ í•™ìŠµí•œë‹¤ë©´ ë¯¸ë˜ë¥¼ ìœ„í•œ ê³µë¶€ ì²´ë ¥ì´ ì‘¥ì‘¥ í´ ê±°ì˜ˆìš”</strong> ğŸ’ª 
                8ì›” ì—¬ë¦„ë°©í•™ ë§ˆë¬´ë¦¬ ë° 2í•™ê¸° ì‹œì‘ ì‹œê¸°ì— ë§ê²Œ<strong class="text-gray-800">2í•™ê¸° ë‚´ì‹  ê³µë¶€ë¥¼ ê¾¸ì¤€íˆ ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ ë…ë ¤í•´ ì£¼ì„¸ìš”.</strong>
            </p>
            <div class="flex justify-around text-center text-sm">
                <div>
                    <p class="font-bold text-2xl text-indigo-500">5</p>
                    <p class="text-gray-500">í•™ìŠµ ê³¼ëª©</p>
                </div>
                <div>
                    <p class="font-bold text-2xl text-indigo-500">32<span class="text-lg">ê°•</span></p>
                    <p class="text-gray-500">ì´ ìˆ˜ê°•</p>
                </div>
            </div>
        </section>

        <!-- 2. Detailed Analysis by Subject -->
        <h2 class="text-2xl font-bold mb-4 mt-10 text-center text-gray-800">í•™ìŠµ ë‚´ìš© ë¶„ì„</h2>

        <!-- Subject analysis cards... (Content is unchanged) -->
        <div class="section-card">
            <h3 class="text-xl font-bold text-gray-800 mb-3">ğŸ“– êµ­ì–´</h3>
            <div class="space-y-4">
                <div>
                    <h4 class="font-semibold text-gray-700">í•™ìŠµ í˜„í™©</h4>
                    <p class="text-sm text-gray-600 mt-1"><strong class="text-red-500">'ì¼ê°€'</strong> ë¬¸í•™ ì‘í’ˆì„ í†µí•´ ë“±ì¥ì¸ë¬¼ ê°„ì˜ ë‚´ì /ì™¸ì  ê°ˆë“±ì„ í•™ìŠµí–ˆìŠµë‹ˆë‹¤. <strong class="text-blue-600">ê¾¸ì¤€í•œ ìˆ˜ê°•ì˜ íë¦„</strong>ì„ ì˜ ìœ ì§€í•˜ê³  ìˆì–´ìš”. ğŸ˜</p>
                </div>
                <div>
                    <h4 class="font-semibold text-gray-700">AI í•™ìŠµ ì œì•ˆ</h4>
                    <p class="text-sm text-gray-600 mt-1">ì‘í’ˆì˜ ë‚´ìš© ë¿ë§Œ ì•„ë‹ˆë¼ <strong class="text-blue-600">ì†Œì„¤ì˜ ì‹œì ê³¼ ì¢…ë¥˜(1ì¸ì¹­,3ì¸ì¹­), ê³µê°ì  ë“£ê¸°ì˜ íš¨ê³¼ì™€ ë°©ë²•</strong>ì€ ìì£¼ ì¶œì œë˜ëŠ” í¬ì¸íŠ¸ì´ë¯€ë¡œ, ë°˜ë“œì‹œ ì˜ ì •ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë…ë ¤í•´ ì£¼ì„¸ìš”.</p>
                </div>
            </div>
        </div>
        <div class="section-card">
            <h3 class="text-xl font-bold text-gray-800 mb-3">ğŸ”¤ ì˜ì–´</h3>
            <div class="space-y-4">
                <div>
                    <h4 class="font-semibold text-gray-700">í•™ìŠµ í˜„í™©</h4>
                    <p class="text-sm text-gray-600 mt-1">í•µì‹¬ ë¬¸ë²•ì¸ <strong class="text-red-500">'ëª©ì ê²© ê´€ê³„ëŒ€ëª…ì‚¬'</strong>ì™€ <strong class="text-red-500">'ë³¸ë¬¸ ë¶„ì„'</strong>ì„ í†µí•´ ì˜ì–´ì˜ ê¸°ë³¸ê¸°ë¥¼ íƒ„íƒ„íˆ ë‹¤ì§€ê³  ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ, <strong class="text-red-500">[Top Class] ê°•ì˜</strong>ë¥¼ í†µí•´ ì‹¬í™” í•™ìŠµê¹Œì§€ ë„ì „í–ˆì–´ìš”. ğŸ˜</p>
                </div>
                <div>
                    <h4 class="font-semibold text-gray-700">AI í•™ìŠµ ì œì•ˆ</h4>
                    <p class="text-sm text-gray-600 mt-1"><strong class="text-blue-600">ëª©ì ê²© ê´€ê³„ëŒ€ëª…ì‚¬ëŠ” ë³´í†µ ì„ í–‰ì‚¬ ë’¤ì— ì£¼ì–´+ë™ì‚¬ê°€ ë°”ë¡œ ì˜¤ë©´ ìƒëµí•´ë„ ëœë‹¤ëŠ” ì </strong>ì„ ì•Œê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤. <strong class="text-blue-600">ì£¼ê²© ê´€ê³„ëŒ€ëª…ì‚¬ì™€ í•¨ê»˜ ì •ë¦¬í•˜ëŠ” ë“±ì˜ ê¹Šì´ ìˆëŠ” ë¬¸ë²• ê³µë¶€</strong>ë¥¼ ë³‘í–‰í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•´ ë“œë ¤ìš”.</p>
                </div>
            </div>
        </div>
        <div class="section-card">
            <h3 class="text-xl font-bold text-gray-800 mb-3">ğŸ§® ìˆ˜í•™</h3>
            <div class="space-y-4">
                <div>
                    <h4 class="font-semibold text-gray-700">í•™ìŠµ í˜„í™©</h4>
                    <p class="text-sm text-gray-600 mt-1">1í•™ê¸° <strong class="text-red-500">'ì—°ë¦½ë°©ì •ì‹'</strong> ë‹¨ì› ë³µìŠµì„ ë§ˆì¹˜ê³ , 2í•™ê¸° <strong class="text-red-500">'ë„í˜•ì˜ ì„±ì§ˆ'</strong> ë‹¨ì› ì˜ˆìŠµì„ ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ê¸°ë§ê³ ì‚¬ ì´í›„ì—ë„ ë‚¨ì€ 1í•™ê¸° ê³¼ì •ì„ ì˜ ë§ˆë¬´ë¦¬í•œ ì ì€ ì •ë§ ëŒ€ë‹¨í•©ë‹ˆë‹¤.</p>
                </div>
                <div>
                    <h4 class="font-semibold text-gray-700">AI í•™ìŠµ ì œì•ˆ</h4>
                    <p class="text-sm text-gray-600 mt-1">2í•™ë…„ 2í•™ê¸° ìˆ˜í•™ì˜ í•µì‹¬ì€ 'ë„í˜•ì˜ ë‹®ìŒ'ì…ë‹ˆë‹¤. 2í•™ê¸° ìˆ˜í•™ì„ ìì‹ ìˆê²Œ ì‹œì‘í•  ìˆ˜ ìˆë„ë¡ <strong class="text-blue-600">ë‹®ìŒì˜ ì¡°ê±´ê³¼ ì„±ì§ˆì„ ì •í™•íˆ ì´í•´í•˜ê³  ì¦ëª…í•˜ëŠ” ì—°ìŠµ</strong>ì„ ì±™ê²¨ ì£¼ì„¸ìš”.</p>
                </div>
            </div>
        </div>
        <div class="section-card">
            <h3 class="text-xl font-bold text-gray-800 mb-3">ğŸ”¬ ê³¼í•™</h3>
            <div class="space-y-4">
                <div>
                    <h4 class="font-semibold text-gray-700">í•™ìŠµ í˜„í™©</h4>
                    <p class="text-sm text-gray-600 mt-1"><strong class="text-red-500">'ë™ë¬¼ê³¼ ì—ë„ˆì§€'</strong> ë‹¨ì›ì„ ì¤‘ì‹¬ìœ¼ë¡œ 2í•™ê¸° ë‚´ìš©ì„ ì˜ˆìŠµí–ˆìŠµë‹ˆë‹¤. ì´í•´ê°€ ì–´ë ¤ìš´ ê°œë…ì„ <strong class="text-blue-600">ë˜‘ë˜‘í•˜ê²Œ ê³¨ë¼ì„œ ê³µë¶€</strong>í•˜ë©° ìê¸°ì£¼ë„í•™ìŠµ ìŠµê´€ì„ ì˜ í˜•ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤. ğŸ¤—</p>
                </div>
                <div>
                    <h4 class="font-semibold text-gray-700">AI í•™ìŠµ ì œì•ˆ</h4>
                    <p class="text-sm text-gray-600 mt-1">'ë™ë¬¼ê³¼ ì—ë„ˆì§€' ë‹¨ì›ì€ <strong class="text-blue-600">ì†Œí™” â†’ ìˆœí™˜ â†’ í˜¸í¡ â†’ ë°°ì„¤ì„ ì„¸í¬í˜¸í¡ìœ¼ë¡œ ì—ë„ˆì§€ë¥¼ ì–»ëŠ” í•œ íë¦„</strong>ì„ì„ ì—°ê²°í•´ì„œ ì´í•´í•˜ëŠ” ê²ƒì´ í•µì‹¬ì…ë‹ˆë‹¤. ë¯¸ì†Œ í•™ìƒì´ ì˜ ì•Œê³  ìˆëŠ”ì§€ ë¬¼ì–´ë´ ì£¼ì„¸ìš”.</p>
                </div>
            </div>
        </div>
        <div class="section-card">
            <h3 class="text-xl font-bold text-gray-800 mb-3">ğŸ“œ ì—­ì‚¬</h3>
            <div class="space-y-4">
                <div>
                    <h4 class="font-semibold text-gray-700">í•™ìŠµ í˜„í™©</h4>
                    <p class="text-sm text-gray-600 mt-1"><strong class="text-red-500">'ìœ ëŸ½ì˜ ì‚°ì—…í™”', 'ì œêµ­ì£¼ì˜'</strong>ê¹Œì§€ 2í•™ê¸° ë²”ìœ„ë¥¼ ì˜ˆìŠµí•˜ë©° ê·¼ëŒ€ ì—­ì‚¬ ë³€í™”ì˜ í° íë¦„ì„ íŒŒì•…í–ˆìŠµë‹ˆë‹¤.</p>
                </div>
                <div>
                    <h4 class="font-semibold text-gray-700">AI í•™ìŠµ ì œì•ˆ</h4>
                    <p class="text-sm text-gray-600 mt-1">ì‚°ì—…í˜ëª…ìœ¼ë¡œ í˜ì´ ì„¸ì§„ ì„œì–‘ ì—´ê°•ì´ ì•„ì‹œì•„Â·ì•„í”„ë¦¬ì¹´ì— ì¹¨íˆ¬í•´ <strong class="text-blue-600">ë¶ˆí‰ë“± ì¡°ì•½ì„ ê°•ìš”, ê·¼ëŒ€í™” ì¶”ì§„, ëŒ€ì‘ìœ¼ë¡œ ë…ë¦½Â·ë¯¼ì¡±ìš´ë™ê¹Œì§€</strong> ê° ë‚´ìš©ì˜ ì›ì¸ê³¼ ë°°ê²½ì„ ì¤‘ì‹¬ìœ¼ë¡œ ê³µë¶€í•  ìˆ˜ ìˆë„ë¡ ì—­ì‚¬ ê³µë¶€ì˜ íŒì„ ì•Œë ¤ ì£¼ì„¸ìš”.</p>
                </div>
            </div>
        </div>

        <!-- 3. Learning Path Recommendation -->
        <h2 class="text-2xl font-bold mb-4 mt-10 text-center text-gray-800">í•™ìŠµ ë°©í–¥ ì¶”ì²œ</h2>

        <div class="section-card">
            <!-- Tab Buttons -->
            <div class="flex justify-center border-b border-gray-200 mb-6">
                <button id="tab-progress-math-btn" class="tab-button active">ì— ë² ìŠ¤íŠ¸ íšŒì›ì˜ ìˆ˜í•™ ì§„ë„ ë¶„í¬í‘œ</button>
            </div>

            <!-- Math Progress Analysis Content -->
            <div id="tab-progress-math-content">
                <!-- Legend and View Toggle -->
                <div class="flex flex-wrap justify-between items-center mb-4 gap-4">
                    <!-- Legend -->
                    <div class="flex items-center flex-wrap gap-x-4 gap-y-2 text-sm">
                        <div class="flex items-center"><span class="w-4 h-4 rounded-full bg-red-500 mr-2 flex-shrink-0"></span><span>ë‚˜ì˜ ì§„ë„</span></div>
                        <div class="flex items-center"><span class="w-4 h-4 rounded-sm bg-blue-200 mr-2 flex-shrink-0"></span><span>ë™í•™ë…„ ë¶„í¬</span></div>
                        <div class="flex items-center"><span class="w-4 h-4 rounded-sm border-2 border-yellow-500 mr-2 flex-shrink-0"></span><span>ìƒìœ„ê¶Œ ì£¼ìš” ë¶„í¬</span></div>
                    </div>
                    <!-- View Toggle Buttons -->
                    <div class="flex border border-gray-200 rounded-lg p-0.5">
                        <button id="view-normal-btn" class="toggle-btn active px-3 py-1 text-sm rounded-md">ì¼ë°˜</button>
                        <button id="view-top-tier-btn" class="toggle-btn px-3 py-1 text-sm rounded-md">ìƒìœ„ê¶Œ</button>
                    </div>
                </div>

                <!-- Math Progress Grid (Content generated by JavaScript) -->
                <div id="math-progress-grid" class="progress-grid">
                    <!-- Grid content will be generated by JavaScript -->
                </div>
                <div class="text-left text-xs text-gray-400 mt-2">
                    *ìƒìœ„ê¶Œ í•™ìƒ: íŠ¹ëª©ìì‚¬ê³  í•©ê²©ì / ëª©í‘œë‹¬ì„±ì¥í•™ìƒ ìˆ˜ê°• ì´ë ¥ ë°˜ì˜
                </div>

                <!-- AI Recommendation for Math -->
                <div class="bg-purple-50 border border-purple-200 rounded-lg p-6 mt-6">
                    <h4 class="font-bold text-lg text-purple-800">ğŸ’¡ íŠ¹ëª©ê³  í•©ê²© ì„ ë°°ë“¤ì˜ ìˆ˜í•™ í•™ìŠµ TIP</h4>
                    <p class="mt-3 text-sm text-purple-700">
                        ìˆ˜ê°• ë°ì´í„°ì— ë”°ë¥´ë©´, <strong>íŠ¹ëª©/ìì‚¬ê³ ì— í•©ê²©í•œ ì„ ë°°ë“¤ì€ ìˆ˜í•™ ê³¼ëª© í•™ìŠµì— ìˆì–´ í˜„ì¬ ì§„ë„ë¥¼ ì‹¬í™” ê°•ì¢Œë¡œ ë³µìŠµ</strong>í–ˆìŠµë‹ˆë‹¤. ì‹¬í™” ê°•ì¢Œê°€ ì–´ë µë‹¤ë©´, <strong>ê°œë… ê°•ì¢Œì™€ ë™ì‹œì— í•¨ê»˜ ë“£ëŠ”</strong> ìˆ˜ê°• ì½”ìŠ¤ê°€ ë§ì•˜ìŠµë‹ˆë‹¤. ğŸ˜<br><br>
                        ë˜í•œ ìµœì†Œ <strong>í•œ í•™ê¸° ì´ìƒ ì˜ˆìŠµ</strong>ìœ¼ë¡œ ìˆ˜í•™ì„ ê³µë¶€í–ˆëŠ”ë°ìš”. <strong>ìˆ˜í•™ ê³¼ëª©ì€ í•™ê¸°ë³„ ì—°ê³„ì„±ì´ ê°•í•´ ë‹¤ìŒ í•™ë…„ì˜ ê°™ì€ í•™ê¸° ì˜ˆìŠµ</strong>ì„ í•˜ê¸°ë„ í–ˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ 2í•™ë…„ 2í•™ê¸°ì— 3í•™ë…„ 2í•™ê¸° ê³µë¶€ë¥¼ í•¨ê»˜ í•œ ì„ ë°°ê°€ ë§ì•˜ìŠµë‹ˆë‹¤. ğŸ¤—
                    </p>
                </div>
            </div>
        </div>
    </main>

    <footer class="text-center py-6 text-gray-500 text-sm">
        <p>&copy; 2025 Megastudy. All Rights Reserved.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            // --- Section 3 (Progress Analysis): Grid Logic ---
            const viewNormalBtn = document.getElementById('view-normal-btn');
            const viewTopTierBtn = document.getElementById('view-top-tier-btn');
            const mathGrid = document.getElementById('math-progress-grid');
            
            // Math progress data definition
            const mathData = {
                normal: { // Progress distribution for general students
                    '2-1': { 'ê¸°ë³¸': 0, 'ë°œì „': 8, 'ì‹¬í™”': 0 },
                    '2-2': { 'ê¸°ë³¸': 52, 'ë°œì „': 13, 'ì‹¬í™”': 0 },
                    '3-1': { 'ê¸°ë³¸': 11, 'ë°œì „': 9, 'ì‹¬í™”': 0 },
                    '3-2': { 'ê¸°ë³¸': 8, 'ë°œì „': 0, 'ì‹¬í™”': 0 },
                },
                topTier: { // Progress distribution for top-tier students
                    '2-1': { 'ê¸°ë³¸': 0, 'ë°œì „': 8, 'ì‹¬í™”': 0 },
                    '2-2': { 'ê¸°ë³¸': 52, 'ë°œì „': 13, 'ì‹¬í™”': 30 }, // Top-tier has advanced progress
                    '3-1': { 'ê¸°ë³¸': 11, 'ë°œì „': 9, 'ì‹¬í™”': 5 },
                    '3-2': { 'ê¸°ë³¸': 8, 'ë°œì „': 7, 'ì‹¬í™”': 0 },
                },
                myPosition: { semester: '2-2', level: 'ê¸°ë³¸' }, // My current progress
                topTierPath: [ // Recommended learning path for top-tier
                    { semester: '2-2', level: 'ì‹¬í™”' },
                    { semester: '3-1', level: 'ë°œì „' },
                ],
                tooltips: { // Tooltip messages for each cell
                    // REMOVED: Placeholder tooltip for '2-1' was removed for clarity.
                    '2-2': {
                        'ê¸°ë³¸': "[ì£¼ìš” í•™ìŠµ ì§„ë„] ì‚¼ê°í˜•ì˜ ì„±ì§ˆ, ì‚¬ê°í˜•ì˜ ì„±ì§ˆ",
                        'ë°œì „': "[ì£¼ìš” í•™ìŠµ ì§„ë„] ë„í˜•ì˜ ë‹®ìŒ",
                        'ì‹¬í™”': "[ì£¼ìš” í•™ìŠµ ì§„ë„] ë„í˜•ì˜ ë‹®ìŒ"
                    },
                    '3-1': {
                        'ê¸°ë³¸': "[ì£¼ìš” í•™ìŠµ ì§„ë„] ì œê³±ê·¼ê³¼ ì‹¤ìˆ˜",
                        'ë°œì „': "[ì£¼ìš” í•™ìŠµ ì§„ë„] ë‹¤í•­ì‹, ë°©ì •ì‹",
                        'ì‹¬í™”': "[ì£¼ìš” í•™ìŠµ ì§„ë„] ë‹¤í•­ì‹, ë°©ì •ì‹"
                    },
                    '3-2': {
                        'ê¸°ë³¸': "[ì£¼ìš” í•™ìŠµ ì§„ë„] ì‚¼ê°ë¹„",
                        'ë°œì „': "[ì£¼ìš” í•™ìŠµ ì§„ë„] ì‚¼ê°ë¹„"
                    }
                }
            };

            // List of all possible background/text color classes for easy cleanup
            const bgClasses = ['bg-blue-500', 'text-white', 'bg-blue-400', 'bg-blue-300', 'bg-blue-200', 'bg-blue-100', 'bg-gray-100'];

            // Function to return background color class based on percentage
            function getBgColor(percentage) {
                if (percentage > 80) return 'bg-blue-500 text-white';
                if (percentage > 50) return 'bg-blue-400 text-white';
                if (percentage > 30) return 'bg-blue-300';
                if (percentage > 10) return 'bg-blue-200';
                if (percentage > 0) return 'bg-blue-100';
                return 'bg-gray-100';
            }

            /**
             * Updates the math progress grid based on the selected view.
             * @param {string} view - The view mode, 'normal' or 'top-tier'.
             */
            function updateMathGrid(view) {
                const isTopTierView = view === 'top-tier';
                
                // Toggle visibility of the 'ì‹¬í™”' (Advanced) level row
                const simhwaRow = mathGrid.querySelector('.simhwa-row');
                if (simhwaRow) {
                    simhwaRow.style.display = isTopTierView ? 'contents' : 'none';
                }

                // Update each cell in the grid based on the view
                ['2-1', '2-2', '3-1', '3-2'].forEach(semester => {
                    ['ê¸°ë³¸', 'ë°œì „', 'ì‹¬í™”'].forEach(level => {
                        const cell = mathGrid.querySelector(`[data-semester="${semester}"][data-level="${level}"]`);
                        if (!cell) return;

                        const data = isTopTierView ? mathData.topTier : mathData.normal;
                        const percentage = data[semester]?.[level] ?? 0;
                        
                        // Clean up previous classes
                        cell.classList.remove(...bgClasses, 'top-tier-path');
                        
                        // Apply new background color class
                        cell.classList.add(...getBgColor(percentage).split(' '));

                        // Reset tooltip and inner content
                        cell.title = '';
                        
                        // Set 'ME' icon and percentage text
                        if (mathData.myPosition.semester === semester && mathData.myPosition.level === level) {
                            cell.innerHTML = `<span class="me-icon">ME</span><span>${percentage}%</span>`;
                            cell.title = "[ë‚˜ì˜ ì§„ë„] í˜„ì¬ ì´ ìœ„ì¹˜ì—ì„œ í•™ìŠµí•˜ê³  ìˆìŠµë‹ˆë‹¤.";
                        } else {
                            cell.innerHTML = `<span>${percentage > 0 ? `${percentage}%` : '&nbsp;'}</span>`;
                        }
                        
                        // Add general tooltip content
                        if (mathData.tooltips[semester]?.[level]) {
                            cell.title = (cell.title) 
                                ? `${mathData.tooltips[semester][level]}\n${cell.title}`
                                : mathData.tooltips[semester][level];
                        }
                        
                        // Apply top-tier path style if applicable
                        if (isTopTierView && mathData.topTierPath.some(p => p.semester === semester && p.level === level)) {
                            cell.classList.add('top-tier-path');
                        }
                    });
                });
            }

            /**
             * Sets the view mode for the progress grid and updates it.
             * @param {string} view - The view to set, 'normal' or 'top-tier'.
             */
            function setProgressView(view) {
                viewNormalBtn.classList.toggle('active', view === 'normal');
                viewTopTierBtn.classList.toggle('active', view === 'top-tier');
                updateMathGrid(view);
            }

            /**
             * Creates the initial HTML structure for the grid.
             */
            function createInitialGrid() {
                const semesters = ['ì¤‘2-1', 'ì¤‘2-2', 'ì¤‘3-1', 'ì¤‘3-2'];
                const levels = ['ì‹¬í™”', 'ë°œì „', 'ê¸°ë³¸'];
                
                let gridHtml = `<div class="grid-cell grid-header"></div>`;
                semesters.forEach(s => gridHtml += `<div class="grid-cell grid-header">${s}</div>`);

                levels.forEach(level => {
                    // Using a wrapper with 'display: contents' and a class for easy toggling
                    gridHtml += `<div class="${level === 'ì‹¬í™”' ? 'simhwa-row' : ''}" style="display: contents;">`;
                    gridHtml += `<div class="grid-cell grid-header" data-level="${level}">${level}</div>`;
                    ['2-1', '2-2', '3-1', '3-2'].forEach(semester => {
                        gridHtml += `<div class="grid-cell" data-semester="${semester}" data-level="${level}"></div>`;
                    });
                    gridHtml += `</div>`;
                });

                mathGrid.innerHTML = gridHtml;
            }

            // --- Initialization ---
            viewNormalBtn.addEventListener('click', () => setProgressView('normal'));
            viewTopTierBtn.addEventListener('click', () => setProgressView('top-tier'));
            
            createInitialGrid(); // Create the grid structure
            setProgressView('normal'); // Set the initial view to 'normal'
        });
    </script>
</body>
</html>
